:host {
  --bg: #f9fafb; --panel:#fff; --card:#f3f4f6; --primary:#0ea5e9; --ring:#0284c7;
  --text:#111827; --sub:#4b5563; --border:#e5e7eb;
  display: block;
}
.page { min-height: 100vh; background: var(--bg); color: var(--text); }
.topbar { display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid var(--border); }
.brand { display:flex; align-items:center; gap:12px; }


.grid { display:grid; grid-template-columns: 1fr; gap:24px; padding:24px; }
@media (min-width:1024px) { .grid { grid-template-columns: 6fr 6fr; } }
@media (min-width:1280px) { .grid { grid-template-columns: 7fr 5fr; } }

.left-col { display:flex; flex-direction:column; gap:24px; }
.aside { display:flex; flex-direction:column; gap:24px; }

.panel { background: var(--panel); border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:0 1px 2px rgba(0,0,0,.05); }
.panel-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.eyebrow { font-size:11px; letter-spacing:.12em; text-transform:uppercase; color:var(--sub); }
.title { font-weight:600; }
.tiny { font-size:12px; }
.muted { color: var(--sub); }
.strong { font-weight:600; }
.mt { margin-top:10px; }
.actions { display:flex; gap:8px; margin-top:12px; }
.btn { border:1px solid var(--border); background:#fff; border-radius:12px; padding:8px 12px; font-size:14px; }
.btn:hover { background:#f9fafb; }
.btn-primary { background:#e0f2fe; border-color:#bae6fd; }
.btn-primary:hover { background:#bae6fd; }
.btn[disabled] { opacity:.6; cursor:not-allowed; }

/* Map */
.map {
  position: relative;
  border: 1px solid var(--border);
  background: #f3f4f6;
  border-radius: 12px;
  overflow: hidden;
  flex: 1 1 auto;
  min-height: 100px;
  padding-left: 260px; /* leave room for overlay */
}


.map-svg { width:100%; height:100%; }
.island { cursor:pointer; }
.island-label {
  font-size: 12px;
  font-weight: 600;
  fill: #111; /* dark text */
  stroke: white; /* outline */
  stroke-width: 3px;
  paint-order: stroke; /* put outline behind text */
  pointer-events: none; /* don't block clicks */
  mix-blend-mode: normal; 
}

.hint { position:absolute; left:12px; bottom:12px; background:rgba(255,255,255,.85); border:1px solid var(--border); padding:6px 10px; border-radius:8px; color:var(--sub); font-size:12px; }

/* Trend */
.panel-grow { display:flex; flex-direction:column; min-height: 280px; flex:1 1 0; }
.chart-wrap { flex:1 1 auto; min-height: 220px; }

/* Sidebar common */
.crumbs { display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-top:6px; font-size:14px; }
.chip { padding:4px 8px; border-radius:8px; background:#f3f4f6; border:1px solid var(--border); }
.chip-active { background:#ecfeff; border-color:#a5f3fc; color:#0369a1; }
.chip-county { background:#f5f3ff; border-color:#ddd6fe; color:#5b21b6; }
.chip-option { background:#fff; }
.chip-selected { background:#f5f3ff; border-color:#ddd6fe; }
.sep { opacity:.6; }
.subhead { font-weight:500; margin-bottom:6px; }
.chips { display:flex; flex-wrap:wrap; gap:8px; }

/* Stats grid */
.stats { display:grid; grid-template-columns: 1fr; gap:12px; margin-top:12px; }
@media (min-width:640px) { .stats { grid-template-columns: repeat(3, 1fr); } }

/* Slider */
.slider-wrap { position:relative; padding-top:20px; }
.slider-wrap input[type="range"] { width:100%; accent-color:#0891b2; }
.bubble {
  position: absolute;
  top: 20px;
  transform: translate(-50%, -120%); /* move bubble closer */
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 2px 6px;
  font-size: 12px;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
}
.slider-ends { display:flex; justify-content:space-between; color:var(--sub); font-size:12px; margin-top:6px; }

/* Email */
.summary { border:1px solid var(--border); background:#f3f4f6; border-radius:8px; padding:8px 10px; }
.label { display:block; margin-top:12px; font-weight:500; }
.input { margin-top:6px; width:100%; border:1px solid #d1d5db; border-radius:8px; padding:8px 10px; font-size:14px; }
.input:focus { outline:2px solid #06b6d4; border-color:#06b6d4; }
.error { color:#dc2626; }

.footer { padding: 0 24px 24px; color:#9ca3af; font-size:12px; }

.info-box {
  display: block;           /* ensure it's a block element */
  grid-column: 1 / -1;      /* span across full grid if inside a grid */
  width: 100%;              /* always take full width */
  margin-top: 14px;
  padding: 14px 16px;
  background: #ecfeff;      /* light cyan background */
  border-left: 4px solid #06b6d4; /* teal accent */
  border-radius: 10px;
  font-size: 14px;
  font-weight: 500;
  color: #0f172a;
  box-shadow: 0 2px 4px rgba(0,0,0,0.06);
  box-sizing: border-box;   /* include padding in width */
  white-space: normal;      /* allow wrapping if sentence is long */
}

.selection-overlay {
  position: absolute;
  top: 12px;
  left: 12px;
  background: rgba(255,255,255,0.9);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  width: clamp(160px, 40%, 240px); /* min 160px, max 240px, flexible */
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}


.crumbs {
  display: flex;
  flex-wrap: wrap;     
  gap: 6px;           
  align-items: center;
  margin-top: 6px;
  font-size: 14px;
  word-break: break-word; 
}

.hover-label {
  font-size: 10px;
  font-weight: 600;
  fill: #111;
  paint-order: stroke;
  stroke: white;
  stroke-width: 2px;
  pointer-events: none; 
}

@media (min-width:640px) {
  .stats-rainfall {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px; 
  }

  .stats:not(.stats-rainfall) {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Snapshot hero emphasis */
.snapshot-hero {
  background: linear-gradient(180deg,#ffffff,#f0f9ff);
  border-color:#bae6fd;
  box-shadow: 0 8px 24px rgba(2,132,199,0.12);
  padding: 12px 16px;
  min-height: 100px;
}
.snapshot-hero .panel-head { align-items:flex-start; gap:12px; margin-bottom:6px; }
.snapshot-hero .title { font-weight: 600; }

/* Compact control bar: “Select a dataset” + “Select a time scale” */
.snapshot-controls { display:flex; flex-wrap:wrap; gap:12px 20px; align-items:flex-start; margin:2px 0 6px; }
.snapshot-controls .control { display:flex; flex-direction:column; gap:4px; min-width:max-content; }
.snapshot-controls .control .tiny { font-weight:600; letter-spacing:.02em; }
.chips-toggle .chip { background:#fff; border-color:#dbeafe; }
.chips-toggle .chip.chip-selected { background:#e0f2fe; border-color:#7dd3fc; color:#075985; }

/* Keep the statement wide; you already have .info-box – just ensure spacing feels tight */
.snapshot-hero .info-box { margin-top:8px; }

/* Snapshots tiles: rows of 2 (also for Temperature) */
@media (min-width:640px) {
  .stats { grid-template-columns: repeat(2, 1fr); }          /* make default 2-up */
  .stats-rainfall { grid-template-columns: repeat(2, 1fr); } /* keep rainfall 2-up */
}

.panel.fullscreen {
  position: fixed;
  inset: 0;
  margin: 0;
  border-radius: 0;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  background: var(--panel);
}
.panel.fullscreen .panel-head {
  position: sticky;
  top: 0;
  background: #fff;
  z-index: 2;
  padding-bottom: 12px;
}
.panel.fullscreen .chart-wrap {
  min-height: calc(100vh - 100px);
}



.panel-grow { min-height: 400px; }
.chart-wrap { min-height: 400px; }

/* Make the snapshot hero a 4-col grid */
.snapshot-hero {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}

/* Keep header/controls/statement spanning full width */
.snapshot-hero .panel-head,
.snapshot-hero .snapshot-controls,
.snapshot-hero .info-box {
  grid-column: 1 / -1;
}

/* Flatten the two stats rows so their children share the same grid */
.snapshot-hero .stats,
.snapshot-hero .stats-rainfall {
  display: contents;
}

/* Mobile: fall back to 2-up */
@media (max-width: 639px) {
  .snapshot-hero {
    grid-template-columns: repeat(2, 1fr);
  }
}
